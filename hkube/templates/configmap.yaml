apiVersion: v1
data:
  registry.json: |
        {"registry":{{ .Values.global.registry | trimSuffix "/" | quote }} }
  clusterOptions.json: |
        {
              "useNodeSelector":{{ and .Values.global.production (not .Values.global.namespaced) | default false}}, 
              "ingressHost":{{ .Values.ingress.hostname | quote }},
              "ingressPrefix": {{ .Values.ingress.prefix | quote }}
        }
  versions.json: |
        {
            "systemVersion": "{{ .Values.systemversion }}",
            "versions": [
                  {
                        "project": "api-server",
                        "tag": "{{ index .Values "api_server" "image" "tag" }}"
                  },
                  {
                        "project": "worker",
                        "tag": "{{ index .Values "worker" "image" "tag" }}"
                  },
                  {
                        "project": "pipeline-driver",
                        "tag": "{{ index .Values "pipeline-driver" "image" "tag" }}"
                  },
                  {
                        "project": "algorunner",
                        "tag": "{{ index .Values "algorunner" "image" "tag" }}"
                  },
                  {
                        "project": "simulator",
                        "tag": "{{ index .Values "simulator" "image" "tag" }}"
                  },
                  {
                        "project": "algorithm-example",
                        "tag": "{{ index .Values "algorithm-example" "image" "tag" }}"
                  },
                  {
                        "project": "monitor-server",
                        "tag": "{{ index .Values "monitor_server" "image" "tag" }}"
                  },
                  {
                        "project": "algorithm-queue",
                        "tag": "{{ index .Values "algorithm-queue" "image" "tag" }}"
                  },
                  {
                        "project": "resource-manager",
                        "tag": "{{ index .Values "resource_manager" "image" "tag" }}"
                  },
                  {
                        "project": "task-executor",
                        "tag": "{{ .Values.task_executor.image.tag }}"
                  },
                  {
                        "project": "trigger-service",
                        "tag": "{{ index .Values "trigger_service" "image" "tag" }}"
                  },
                  {
                        "project": "algorithm-operator",
                        "tag": "{{ index .Values "algorithm_operator" "image" "tag" }}"
                  },
                  {
                        "project": "pipeline-driver-queue",
                        "tag": "{{ .Values.pipeline_driver_queue.image.tag }}"
                  },
                  {
                        "project": "clean-old-jobs",
                        "tag": "{{ index .Values "clean_old_jobs" "image" "tag" }}"
                  },
                  {
                        "project": "cpu-load-algorithm",
                        "tag": "{{ index .Values "cpu-load-algorithm" "image" "tag" }}"
                  },
                  {
                        "project": "storage-cleaner",
                        "tag": "{{ index .Values "storage_cleaner" "image" "tag" }}"
                  },
                  {
                        "project": "pipeline-cleaner",
                        "tag": "{{ index .Values "pipeline_cleaner" "image" "tag" }}"
                  },
                  {
                        "project": "etcd-cleaner",
                        "tag": "{{ index .Values "etcd_cleaner" "image" "tag" }}"
                  },
                  {
                        "project": "caching-service",
                        "tag": "{{ index .Values "caching_service" "image" "tag" }}"
                  },
                  {
                        "project": "algorithm-builder",
                        "tag": "{{ index .Values "algorithm-builder" "image" "tag" }}"
                  },
                  {
                        "project": "kaniko",
                        "tag": "{{ .Values.kaniko.image.tag }}"
                  },
                  {
                        "project": "algorithm-example-python",
                        "tag": "{{ .Values.algorithm_example_python.image.tag }}"
                  },
                  {
                        "project": "nodejs-env",
                        "tag": "{{ .Values.nodejs_env.image.tag }}"
                  },
                  {
                        "project": "python-env",
                        "tag": "{{ .Values.python_env.image.tag }}"
                  }

            ]
            }
kind: ConfigMap
metadata:
  name: hkube-versions
  namespace: {{ .Release.Namespace }}
