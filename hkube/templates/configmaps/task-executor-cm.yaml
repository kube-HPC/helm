---
apiVersion: v1
kind: ConfigMap
metadata:
  name: task-executor-configmap
data:
  NODE_ENV: {{.Values.env.node_env}}
  DEFAULT_STORAGE: {{index .Values "env" "default_storage" | quote}}
  WORKER_SOCKET_MAX_PAYLOAD_BYTES: "{{index .Values "task-executor" "env" "worker_socket_max_payload_bytes"}}"
  BASE_FS_ADAPTER_DIRECTORY: {{ .Values.global.storage.fs.base_directory | quote}}
  METRICS_PORT: "{{index .Values "task-executor" "env" "metric_port"}}"
  IS_NAMESPACED: {{ .Values.global.namespaced | quote}}
  NO_PRIVILEGED: {{ .Values.global.noPrivileged | quote}}
  {{- if .Values.global.production }}
  PIPELINE_DRIVERS_AMOUNT: "{{index .Values "task-executor" "env" "pipeline_drivers_amount"}}"
  {{- else }}
  PIPELINE_DRIVERS_AMOUNT: "1"
  {{- end }}
  CLUSTER_NAME: {{ .Values.global.clusterName | quote}}
